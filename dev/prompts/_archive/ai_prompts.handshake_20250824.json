{
  "format": "ai-handshake/1.1",
  "id": "ai_prompts-handshake",
  "version": "1.3.0",
  "updatedAt": "2025-08-21T20:30:00+09:00",

  "hostProject": "shorts-player-kit",
  "scope": {
    "folder": "ai_prompts",
    "role": "AI-to-AI prompt hub",
    "audience": ["agent", "tooling", "human-reviewer (optional)"]
  },

  "links": {
    "upstreamHandshake": "../ai_handshake.json",
    "readme": "./README.md",
    "blockmap": "./blockmap.yml",
    "templatesDir": "./templates"
  },

  "principles": {
    "p1": "3Step固定（1.ファイル名 → 2.操作 → 3.検索ワード）",
    "p2": "最小差分（replace-block ＞ insert-after ＞ replace-file）",
    "p3": "単一一致の厳守（0件/複数件は中止）",
    "p4": "“完全体”ブロック提示（前後1行を含む）",
    "p5": "BlockID と 署名行の二重アンカー（いずれか欠落時は保留）"
  },

  "stepOrder": ["file", "operation", "search"],

  "anchorPolicy": {
    "requireSingleMatch": true,
    "caseSensitive": true,
    "contextLines": { "before": 1, "after": 1 },
    "recommendedContextLines": { "before": 2, "after": 2 }
  },

  "operationPriority": ["replace-block", "insert-after", "replace-file"],

  "nsCoreJoy": {
    "core": ["Propose", "Justify", "Min-Execute", "Verify", "Record"],
    "extensions": ["Joy"],
    "placement": "every-reply-tail"
  },

  "changelog": {
    "minFile": "../docs/CHANGES.min.md",
    "longGlob": "../docs/CHANGES_*.md",
    "policy": "append-only (min), dated-files (long)"
  }
}